pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
--adventure game
--gmae loop

function _init()
	map_setup()
	make_player()
end

function _update()
	move_player()
end

function _draw()
	cls()
	draw_map()
	draw_player()
end


-->8
--map code

function map_setup()
--map tile settings
	wall=0
	key=1
	door=2
	anim1=3
	anim2=4
	lose=6
	win=7
end

function draw_map()
	mapx=flr(p.x/16)*16
	mapy=flr(p.y/16)*16
	camera(mapx*8,mapy*8)
	map(0,0,0,0,128,16)
end

function is_tile(tile_type,x,y)
	tile=mget(x,y)
	has_flag=fget(tile,tile_type)
	return has_flag
end

function can_move(x,y)
	return not is_tile(wall,x,y)
end
-->8
--player code

function make_player()
	p={}
	p.x=1
	p.y=13
	p.sprite=1
	p.keys=0
end

function draw_player()
	spr(p.sprite,p.x*8,p.y*8)
end

function move_player()
	newx=p.x
	newy=p.y
	
	if(btnp(⬅️)) newx-=1
	if(btnp(➡️)) newx+=1
	if(btnp(⬆️)) newy-=1
	if(btnp(⬇️)) newy+=1
	
	if(can_move(newx,newy)) then
		p.x=mid(0,newx,127)
		p.y=mid(0,newy,63)
	else
		sfx(0)
	end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000002222000222220002222000022222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000022f20002fff20002f22000022222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000002ff00002fff20000ff2000022222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000002110000211120000112000022222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700002f1f000f111f000f1f10000f222f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001110000011100000111000001110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000004040000040400000404000004040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
99999999a9999aaa9999099900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
aaaaaaaa9aaaa999a0a000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
99999999a999aaaa0000000900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
aaaaaaaa9aaa9999aa00000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
99999999a999aaaa9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
aaaaaaaa9aaa99990000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
99999999aa9aa99a9900009900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
aaaaaaaa99a99aa90000aaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111cc1111115511100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111cc11111155651100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111555565100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111255555100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
111111111cc11111c255655c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
111111111111ccc11cccccc100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666666666669499949900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666666665664444444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666665666669999499400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666666666664444444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666666665669944999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666666666664444444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666665666664994999400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666666666664444444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000000000100000000000000000000000000010101000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
3232323232323232323232323232323200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3210111010101010101010101010103200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3211111010111010111111101011113200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3210101010111011111010101111103200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3210101110101011101010101110103200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3210111110101010111111111010103200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3210101111101010101110101010103200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3232323211323232323232323232323200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3232323210103210103210103200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3210103210103210103210103200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3210101010101010103210103200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3232323210103210103210103200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3210103210103232323210103200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3210103210103210103210103200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3210103210103210103210103200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3210101010101010103212123200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3232323210103232323212123232320000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000003210111010101010101011110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000003210111010101010101011110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000003232323232323232323232320000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000400000605000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
